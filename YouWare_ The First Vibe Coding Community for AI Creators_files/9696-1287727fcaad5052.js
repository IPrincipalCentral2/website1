(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9696],{165:(e,t,l)=>{"use strict";l.d(t,{Vt:()=>s,v1:()=>r});var a=l(9509);let r="0000000000000000000000000000",s="00000000-0000-0000-0000-000000000000";a.env.JWT_SECRET_KEY},191:(e,t,l)=>{"use strict";l.d(t,{V:()=>i.Vt,N:()=>m});var a=l(5695),r=l(2115),s=l(4477);let n=(0,s.createServerReference)("60d7ce557c6a2c4e3b865bc11edd5c8cc98944f0b0",s.callServer,void 0,s.findSourceMapURL,"remixProject");var i=l(165),c=l(565),o=l(239),d=l(6139),u=l(8436),x=l(9003);let p=e=>({remix:"Failed to remix project, please try again later",create:"Failed to create project, please try again later"})[e],m=()=>{let e=(0,a.useRouter)(),t=(0,o.I)(),{checkAuth:l}=(0,x.M)(),[s,i]=(0,r.useState)(!1);return{remixAction:(0,r.useCallback)(async(t,a)=>l(async()=>{i(!0);try{let l=await (0,c.i)(),r=await n(t,l);if(r.data){let t=(0,d.$)(),l={enter_from:a};"create"===a&&(l.createWeb="true"),e.push("".concat(t,"/editor/").concat(r.data.project_id,"?").concat(new URLSearchParams(l).toString()))}else(0,u.P)({message:p(a),type:"error"})}catch(e){console.log("error",e),(0,u.P)({message:p(a),type:"error"})}finally{i(!1)}setTimeout(()=>{i(!1)},1e3)},{title:"Want to remix this project?",description:"Log in to remix and customize it your way.",cancelText:"Cancel",confirmText:"Log in"})(),[t,e]),isRemixing:s}}},565:(e,t,l)=>{"use strict";l.d(t,{i:()=>r});let a=null,r=()=>a?Promise.resolve(a):new Promise(e=>{if(!window.collectEvent){e("");return}try{window.collectEvent("getToken",t=>{t&&t.ssid?(a=t.ssid,e(t.ssid)):e("")})}catch(t){e("")}})},1884:(e,t,l)=>{"use strict";function a(e){return e>1e3&&e<1e6?(e/1e3).toFixed(1)+"K":e>1e6?(e/1e6).toFixed(1)+"M":e>1e9?(e/1e9).toFixed(1)+"B":e}l.d(t,{Z:()=>a})},2919:(e,t,l)=>{"use strict";l.d(t,{d:()=>u});var a=l(5155),r=l(5427),s=l(2115),n=l(750),i=l(239),c=l(6846),o=l(7023);let d=e=>{let{isOpen:t,onEmojiSelect:l,onClose:r,onMouseEnter:i,onMouseLeave:c,className:d}=e,[u,x]=(0,s.useState)([]),{asyncGetEmojis:p}=(0,n.k)(),m=(0,s.useRef)(null);(0,s.useEffect)(()=>{t&&p().then(e=>{console.log("asyncGetEmojis",e),x(e)})},[t]);let f=e=>{l(e),r()};return t?(0,a.jsx)("div",{className:"absolute top-[-50px] right-0 z-50 h-[54px] w-[268px] items-start justify-items-start ".concat(d),onMouseEnter:i,onMouseLeave:c,children:(0,a.jsx)("div",{className:"flex h-[44px] w-full flex-col items-center justify-center rounded-[8px] bg-white shadow-lg",id:"emoji-picker",ref:m,children:(0,a.jsx)("div",{className:"flex flex-wrap items-center justify-center gap-3",children:u.map(e=>(0,a.jsx)("button",{className:"flex h-5 w-5 cursor-pointer items-center justify-center border-none",onClick:t=>{t.stopPropagation(),t.preventDefault(),f(e)},title:e.display_name,children:(0,a.jsx)(o.m,{emoji:e,className:"h-5 w-5"})},e.interaction_type))})})}):null},u=e=>{let{emojiCounts:t,emojiStatuses:l,className:u,pickerClassName:x,onEmojiClick:p,showAddButton:m=!1,scrollable:f=!0,fromMask:h="from-[#fff]"}=e,{emojis:v}=(0,n.k)(),[b,j]=(0,s.useState)(!1),[g,w]=(0,s.useState)(!1),[_,y]=(0,s.useState)(!1),[N,k]=(0,s.useState)(!1),S=(0,i.I)(),C=(0,s.useRef)(null),P=(0,s.useRef)(null);(0,s.useEffect)(()=>{let e=()=>{if(P.current){let{scrollLeft:e,scrollWidth:t,clientWidth:l}=P.current;y(e>0),k(e<t-l)}},t=P.current;return t&&(e(),t.addEventListener("scroll",e),window.addEventListener("resize",e)),()=>{t&&(t.removeEventListener("scroll",e),window.removeEventListener("resize",e))}},[]);let E=e=>{var t;return(null===(t=l.find(t=>t.interaction_type===e))||void 0===t?void 0:t.status)===!0};return(0,a.jsxs)("div",{className:(0,c.cn)("relative flex justify-end gap-[6px]",u),children:[f&&(0,a.jsxs)(a.Fragment,{children:[_&&(0,a.jsx)("div",{className:(0,c.cn)("pointer-events-none absolute top-0 bottom-0 left-[-2px] z-10 w-6 bg-gradient-to-r to-transparent",h)}),N&&(0,a.jsx)("div",{className:(0,c.cn)("pointer-events-none absolute top-0 bottom-0 z-10 w-6 bg-gradient-to-l to-transparent",h,m?"right-7":"right-0")})]}),(0,a.jsx)("div",{ref:P,className:(0,c.cn)("flex max-h-[26px] min-w-0 gap-[6px]",f?"flex-nowrap overflow-x-auto whitespace-nowrap [-ms-overflow-style:none] [scrollbar-width:none] [&::-webkit-scrollbar]:hidden":"flex-wrap overflow-hidden"),children:t.map(e=>(0,a.jsxs)("div",{className:(0,c.cn)("flex h-[26px] cursor-pointer items-center gap-[6px] rounded-[8px] px-[6px] py-1",E(e.interaction_type)?"bg-brand/6 ring-brand/30 ring-1 ring-inset":"bg-black/3"),style:{direction:"ltr"},onClick:t=>{t.stopPropagation(),t.preventDefault(),p(e.interaction_type)},children:[(0,a.jsx)(o.m,{emoji:v.find(t=>t.interaction_type===e.interaction_type),className:"h-4 w-4",width:16,height:16,triggerType:o.Z.Click,selected:E(e.interaction_type)}),(0,a.jsx)("span",{className:(0,c.cn)("text-xs font-medium",(E(e.interaction_type),"text-black/95")),children:e.count})]},e.interaction_type))}),m&&(0,a.jsx)("div",{className:"flex h-[26px] w-[26px] shrink-0 cursor-pointer items-center justify-center rounded-[8px] bg-black/3 p-1",style:{direction:"ltr"},onClick:e=>{e.stopPropagation(),e.preventDefault(),j(!b)},onMouseEnter:()=>{S||(C.current&&clearTimeout(C.current),j(!0))},onMouseLeave:()=>{S||g||(C.current=setTimeout(()=>{j(!1)},100))},children:(0,a.jsx)(r.kpC,{className:"h-4 w-4 text-black/12"})}),b&&(0,a.jsx)(d,{isOpen:b,className:x,onEmojiSelect:e=>{p(e.interaction_type),j(!1)},onClose:()=>{j(!1)},onMouseEnter:()=>{S||(C.current&&clearTimeout(C.current),w(!0))},onMouseLeave:()=>{S||(w(!1),C.current=setTimeout(()=>{j(!1)},100))}})]})}},6065:(e,t,l)=>{"use strict";l.d(t,{A:()=>u});var a=l(5155),r=l(5427),s=l(2115),n=l(7928),i=l(750),c=l(6389),o=l(1884),d=l(2919);let u=e=>{var t;let{project:l,onUpdate:u}=e,{emojis:x,registerInteractionCallback:p,interact:m}=(0,i.k)(),{track:f}=(0,c.s)();function h(e){var t,a,r,s;let i=null===(a=l.interaction)||void 0===a?void 0:null===(t=a.status.find(t=>t.interaction_type===e))||void 0===t?void 0:t.status;m(l,e,i?n.f.Cancel:n.f.Add),f("emoji_reaction_click",{action:i?"false":"true",project_url:l.project_url,emoji:e,location:location,count:((null===(s=l.interaction)||void 0===s?void 0:null===(r=s.count.find(t=>t.interaction_type===e))||void 0===r?void 0:r.count)||0)+(i?-1:1)})}(0,s.useEffect)(()=>{p(l.project_id,(e,t)=>{u(l,t)})},[l.project_id,p]);let v=(null===(t=l.interaction)||void 0===t?void 0:t.count.filter(e=>e.count>0))||[];return(0,a.jsxs)("div",{className:"flex flex-row items-center gap-3 px-1",children:[(()=>{var e,t;return(0,a.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(r.tLq,{className:"h-3 w-3 text-black/30"}),(0,a.jsx)("div",{className:"pt-0.5 text-[12px] text-black/30",children:(0,o.Z)(null!==(e=l.view_count)&&void 0!==e?e:0)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(r.xP3,{className:"h-3 w-3 text-black/30"}),(0,a.jsx)("div",{className:"pt-0.5 text-[12px] text-black/30",children:(0,o.Z)(null!==(t=l.remix_count)&&void 0!==t?t:0)})]})]})})(),(()=>{var e;return(0,a.jsx)("div",{className:"min-w-0 flex-1",children:(0,a.jsx)(d.d,{emojiCounts:v,emojiStatuses:(null===(e=l.interaction)||void 0===e?void 0:e.status)||[],onEmojiClick:h,showAddButton:(null==v?void 0:v.length)!=x.length})})})()]})}},6450:(e,t,l)=>{"use strict";l.d(t,{default:()=>n});var a=l(5155),r=l(2115),s=l(6389);function n(e){let{children:t}=e,{track:l}=(0,s.s)();return(0,r.useEffect)(()=>{l("home_page_view")},[]),(0,a.jsx)(a.Fragment,{children:t})}},6854:(e,t,l)=>{"use strict";l.d(t,{default:()=>R});var a=l(5155),r=l(5695),s=l(2115),n=l(862),i=l(6846),c=l(5427),o=l(4684),d=l(2997),u=l(9512),x=l(6139);let p="yw-pending-action-";var m=function(e){return e.CreateWeb="create_web",e.HomeUpload="home_upload",e.HtmlShip="html_ship",e}({});let f=e=>{localStorage.setItem(p+e.key,JSON.stringify(e))},h=()=>{let{user:e}=(0,n.A)(),t=e=>{if(new URLSearchParams(window.location.search).get("pending_action")!==e)return null;let t=localStorage.getItem(p+e);return t?JSON.parse(t):null},l=e=>{localStorage.removeItem(p+e)},a=()=>{let e=new URL(window.location.href);e.searchParams.delete("pending_action"),window.history.replaceState({},"",e.toString())};return{withAuth:async t=>{let{key:l,payload:a,extraParams:r={},action:s,reject:n}=t;if(e)await s(a);else{null==n||n(),f({key:l,payload:a,extraParams:r});let e=(0,x.$)(!0)+window.location.pathname,t=new URLSearchParams(window.location.search);t.set("pending_action",l),Object.entries(r).forEach(e=>{let[l,a]=e;t.set(l,a)});let s=encodeURIComponent("".concat(e,"?").concat(t.toString())),i=(0,x.$)(!0);window.location.href="".concat(i,"/login?returnTo=").concat(s)}},checkPendingAction:t,clearPendingAction:l,clearSearchParams:a,runPendingAction:function(e,r){let s=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=!(arguments.length>3)||void 0===arguments[3]||arguments[3],i=t(e);return!!i&&i.key===e&&!!i.payload&&(r(i.payload),s&&l(e),n&&a(),!0)}}};var v=l(7511),b=l(7895),j=l(191),g=l(3561),w=l(6389),_=l(8436);let y=()=>{let[e,t]=(0,s.useState)(!1),[l,r]=(0,s.useState)(""),{remixAction:x}=(0,j.N)(),{track:p,trackGoogleAds:f}=(0,w.s)(),{runPendingAction:y,withAuth:N}=h(),{createWeb:k}=(0,v.g)(),{usageInfo:S,refresh:C}=(0,g.u)(),{user:P}=(0,n.A)(),{addFile:E,attachments:T,setAttachments:U,removeAttachment:R,handleRetry:A}=(0,b.j)(),{UploadInput:I,handlePlusClick:M,handlePaste:z,dropHandlers:F,DragOverlay:L}=(0,u.A)({options:{allowedExtensions:[".png",".jpg",".jpeg",".svg",".html",".css",".js",".pdf",".mp3",".wav",".aac",".m4a",".ogg"],maxAttachments:20,currentCount:T.length},handleFile:e=>{E(e)}}),D=l.trim()&&((null==S?void 0:S.commit.enabled)||!S||!P);(0,s.useEffect)(()=>{C()},[null==P?void 0:P.plan]),(0,s.useEffect)(()=>{""!==l||e||y(m.CreateWeb,async e=>{t(!0),r(e.userPrompt),U(e.attachments),await H(e.userPrompt,e.attachments)})},[l]);let H=async(e,l)=>{if(l.filter(e=>"pending"===e.status||"uploading"===e.status).length>0){(0,_.P)({message:"Attachments are uploading, please wait...",type:"error"});return}t(!0),await N({key:m.CreateWeb,payload:{userPrompt:e,attachments:l,createdTime:Date.now()},action:async()=>{let a=await C();if(!(null==a?void 0:a.commit.enabled)){t(!1);return}await k(e,l),await x(j.V,"create"),f("conversion",{send_to:"AW-16989287560/jnD3CJrv6ccaEIjpj6U_"}),p("create_new_start"),setTimeout(()=>{t(!1)},1e3)}})};return(0,a.jsxs)("div",{className:"relative flex h-full w-full flex-col items-center justify-between gap-3 p-4",...F,children:[(0,a.jsx)(L,{}),(0,a.jsxs)("div",{className:"flex w-full flex-1 flex-col gap-3 bg-white",children:[T.length>0&&(0,a.jsx)(o.A,{attachments:T,onDelete:R,onRetry:A}),(0,a.jsx)("textarea",{disabled:e,value:l,onChange:e=>r(e.target.value),onInput:function(e){e.currentTarget.style.height="auto",e.currentTarget.style.height="".concat(e.currentTarget.scrollHeight,"px")},onKeyDown:e=>{if("Enter"===e.key&&!e.shiftKey&&!e.nativeEvent.isComposing){if(!D){e.preventDefault();return}e.preventDefault(),H(l,T)}},onPaste:z,placeholder:'Tell me what you want to build — e.g. "Make me a personal portfolio"',className:(0,i.cn)("flex-1 resize-none overflow-auto border-none bg-transparent p-1 text-sm outline-none"),rows:3,style:{resize:"none"}})]}),(0,a.jsxs)("div",{className:"flex w-full justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{className:"flex h-9 w-9 cursor-pointer items-center justify-center rounded-[10px] border border-black/12 transition-colors hover:bg-black/3",disabled:e,onClick:M,children:(0,a.jsx)(c.Ld_,{className:"h-4 w-4 text-black"})}),(0,a.jsx)(d.A,{className:"h-9 rounded-[10px] border-black/12",source:"home_page_input"})]}),(0,a.jsx)("div",{className:"flex items-center gap-4",children:e?(0,a.jsx)("div",{className:"bg-brand flex h-9 w-9 cursor-not-allowed items-center justify-center rounded-[10px]",children:(0,a.jsx)(c.xNY,{className:"h-4 w-4 animate-spin text-white"})}):(0,a.jsx)("button",{onClick:()=>H(l,T),disabled:!D,className:"flex h-9 w-9 items-center justify-center rounded-[10px] transition-colors ".concat(D?"bg-brand hover:bg-brand/85 cursor-pointer text-white":"cursor-not-allowed bg-black/3 text-black/45"),children:(0,a.jsx)(c.avw,{className:(0,i.cn)("h-4 w-4",D?"text-white":"text-black/45")})})})]}),(0,a.jsx)(I,{}),(null==P?void 0:P.plan)==="Free"&&(null==S?void 0:S.commit.will_update_at)?(0,a.jsxs)("div",{className:"bg-brand/6 absolute right-4 bottom-[-42px] left-4 flex h-[42px] items-center justify-between gap-2 rounded-b-[12px] px-3 text-center text-[12px] text-black/45",children:[(0,a.jsxs)("div",{className:"flex min-w-0 flex-1 items-center gap-2",children:[(0,a.jsx)(c.xsv,{className:"text-brand h-4 w-4 flex-shrink-0"}),(0,a.jsxs)("span",{className:"text-left",children:["Free tasks: ",(0,a.jsx)("b",{children:"".concat(null==S?void 0:S.commit.free_count)}),", reset at ",(0,a.jsx)("b",{children:null==S?void 0:S.commit.will_update_at}),". Upgrade for unlimited access."]})]}),(0,a.jsx)("button",{className:"bg-brand hover:bg-brand/80 h-[26px] w-[67px] flex-shrink-0 cursor-pointer rounded-[8px] text-[12px] text-white",onClick:()=>{(null==P?void 0:P.uid)&&(p("sub_upgrade_click",{click_from:"home_page_input"}),window.open("/subscription","_blank"))},children:"Upgrade"})]}):null]})};var N=l(6058),k=l(3117),S=l(4326);let C=e=>{let{onUploadSuccess:t,onProjectDeployed:l}=e,[r,n]=(0,s.useState)(""),[i,o]=(0,s.useState)(!1),[d,u]=(0,s.useState)(0),{track:x,trackGoogleAds:p}=(0,w.s)(),{runPendingAction:f,withAuth:v}=h(),b=async()=>{if(!r.trim()){(0,_.P)({message:"Please enter some code first.",type:"error"});return}v({key:m.HtmlShip,payload:r,action:async()=>{j(r)},extraParams:{tab:"paste"}})};(0,s.useEffect)(()=>{i||""!==r||f(m.HtmlShip,async e=>{o(!0),n(e),j(e)})},[i]);let j=async e=>{o(!0),u(0);try{var a;let r=setInterval(()=>{u(e=>e>=90?e:e+10)},200),s=(0,k.aB)(e),{zipFile:n,error:i,isTsx:c}=await (0,k.D6)([s]);if(i||!n){clearInterval(r),o(!1),(0,_.P)({message:{invalid_content:"Deployment error: The uploaded folder contains unsupported or invalid content.",size_limit_exceeded:"Upload failed: The folder exceeds the 10MB size limit.",unknown_error:"Error compressing or uploading files"}[i||"invalid_content"],type:"error"});return}p("conversion",{send_to:"AW-16989287560/jnD3CJrv6ccaEIjpj6U_"}),x("upload_click",{file_type:c?"tsx":"html",file_size:(n.size/1048576).toFixed(2)+" MB"});let d=await (0,S.Q)(n,{eventType:"source_code",isPublic:!1,needUrl:!1}),m=await (0,N.p)(d.file_id);clearInterval(r),u(100),o(!1),x("deploy_success",{project_url:null===(a=m.data)||void 0===a?void 0:a.project_url,file_type:c?"tsx":"html",file_size:(n.size/1048576).toFixed(2)+" MB"}),m.data&&(null==t||t(m.data),null==l||l(m.data.project_id))}catch(e){console.error("Error during upload process:",e),o(!1),(0,_.P)({message:"Upload failed. Please try again.",type:"error"})}};return(0,a.jsxs)("div",{className:"flex h-full w-full flex-col p-4",children:[(0,a.jsx)("textarea",{className:"h-full flex-1 resize-none border-none p-1 pb-4 text-[14px] text-black/95 placeholder:text-black/30 focus:outline-none",value:r,onChange:e=>{n(e.target.value)},placeholder:"Paste your HTML or TSX code here...",disabled:i}),(0,a.jsx)("div",{className:"flex justify-end",children:i?(0,a.jsxs)("div",{className:"bg-brand flex h-9 cursor-not-allowed items-center justify-center gap-2 rounded-[10px] px-2.5 text-[16px] text-white",children:[(0,a.jsx)(c.xNY,{className:"h-4 w-4 animate-spin text-white"}),(0,a.jsxs)("span",{children:["Uploading ",d,"%"]})]}):(0,a.jsx)("button",{className:"bg-brand flex h-9 cursor-pointer items-center justify-center rounded-[10px] px-3 text-base text-white disabled:cursor-not-allowed disabled:bg-black/6 disabled:text-black/30",onClick:b,disabled:i||!r.trim(),children:"Ship It"})})]})};var P=l(9529),E=l(146);let T=e=>{let{onUploadSuccess:t,onProjectDeployed:l}=e,[r,i]=(0,s.useState)(!1),[o,d]=(0,s.useState)(0),{runPendingAction:u,withAuth:x}=h(),{track:p,trackGoogleAds:f}=(0,w.s)(),{user:v}=(0,n.A)(),b=async e=>{i(!0),d(0);try{var a;let r=setInterval(()=>{d(e=>e>=90?e:e+10)},200),{zipFile:s,error:n,isTsx:c=!1}=await (0,k.D6)(e,(null==v?void 0:v.role)==="admin"||(null==v?void 0:v.role)==="employee");if(n||!s){clearInterval(r),i(!1),(0,_.P)({message:{invalid_content:"Deployment error: The uploaded folder contains unsupported or invalid content.",size_limit_exceeded:"Upload failed: The folder exceeds the 10MB size limit.",unknown_error:"Error compressing or uploading files"}[n||"invalid_content"],type:"error"});return}f("conversion",{send_to:"AW-16989287560/jnD3CJrv6ccaEIjpj6U_"}),p("upload_click",{file_type:c?"tsx":"html",file_size:(s.size/1048576).toFixed(2)+" MB"});let o=await (0,S.Q)(s,{eventType:"source_code",isPublic:!1,needUrl:!1}),u=await (0,N.p)(o.file_id);clearInterval(r),d(100),i(!1),p("deploy_success",{project_url:null===(a=u.data)||void 0===a?void 0:a.project_url,file_type:c?"tsx":"html",file_size:(s.size/1048576).toFixed(2)+" MB"}),u.data&&(null==t||t(u.data),null==l||l(u.data.project_id))}catch(e){console.error("Error during upload process:",e),i(!1),(0,_.P)({message:"Error uploading files",type:"error"})}},{UploadInput:j,handlePlusClick:g}=(0,E.A)({options:{allowedExtensions:[".html",".tsx",".jsx"],maxAttachments:1},onFilesReceived:async e=>{await b(e)}}),{UploadInput:y,handlePlusClick:C}=(0,E.A)({options:{},onFilesReceived:async e=>{await b(e)}}),{handleDragLeave:T,handleDragOver:U,handleDrop:R,DragOverlay:A}=(0,P.A)({onFilesReceived:async e=>{await b(e)}}),I=(e,t)=>{x({key:m.HomeUpload,payload:{},extraParams:{tab:"upload"},action:e,reject:t})};return(0,s.useEffect)(()=>{u(m.HomeUpload,async()=>{})},[]),(0,a.jsxs)("div",{className:"relative h-full max-h-[360px] w-full overflow-hidden rounded-[20px] p-3 text-center transition-all duration-300",onDragLeave:T,onDragOver:U,onDrop:e=>{e.preventDefault(),e.stopPropagation(),I(async()=>{R(e)},()=>{e.preventDefault(),e.stopPropagation()})},id:"upload-file-tab",children:[(0,a.jsx)(A,{}),(0,a.jsx)(j,{}),(0,a.jsx)(y,{webkitdirectory:"true",directory:""}),(0,a.jsxs)("div",{className:"relative z-10 flex h-full w-full flex-col items-center justify-center gap-6 rounded-[10px] border border-dashed border-black/12 p-2",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2",children:[(0,a.jsx)("h2",{className:"text-[20px] leading-[20px] text-black/95",children:"Drag & Drop Your Creation"}),(0,a.jsx)("p",{className:"text-[14px] text-black/65",children:"HTML or TSX file｜Folder with HTML, CSS, and JS files (＜10 MB)"})]}),(0,a.jsx)("div",{className:"max-xs:flex-col max-xs:gap-2 flex flex-row gap-4",children:r?(0,a.jsxs)("div",{className:"flex h-9 w-[164px] items-center justify-center gap-2 rounded-[10px] bg-black/3 text-black/95",children:[(0,a.jsx)(c.xNY,{className:"h-4 w-4 animate-spin text-black/95"}),(0,a.jsxs)("span",{className:"text-[14px]",children:["Uploading ",o,"%"]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>{I(async()=>{await g()})},className:"flex h-9 w-40 cursor-pointer items-center justify-center gap-2 rounded-[10px] bg-black/3 text-black/65 hover:border-black/3 hover:bg-white hover:shadow-[0_8px_16px_1px_rgba(0,0,0,0.1)]",children:[(0,a.jsx)("span",{className:"text-[14px]",children:"Select File"}),(0,a.jsx)(c.gxh,{className:"h-4 w-4"})]}),(0,a.jsxs)("button",{onClick:()=>{I(async()=>{await C()})},className:"flex h-9 w-40 cursor-pointer items-center justify-center gap-2 rounded-[10px] bg-black/3 text-black/65 hover:border-black/3 hover:bg-white hover:shadow-[0_8px_16px_1px_rgba(0,0,0,0.1)]",children:[(0,a.jsx)("span",{className:"text-[14px]",children:"Select Folder"}),(0,a.jsx)(c.iH0,{className:"h-4 w-4"})]})]})})]})]})},U=e=>{let{tabs:t,selectedTab:l,onSelect:r,className:s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-row items-center justify-start rounded-xl bg-black/3 p-0.5",s),children:t.map((e,s)=>(0,a.jsxs)("div",{className:"flex flex-row items-center",children:[(0,a.jsx)("button",{onClick:()=>r(e.value),className:(0,i.cn)("flex h-9 w-26 cursor-pointer items-center justify-center rounded-[10px] text-[14px] text-black/45 sm:w-37",l===e.value&&"bg-brand text-white"),children:e.label},e.value),s!==t.length-1&&(0,a.jsx)("div",{className:"mx-1 h-5 w-[1px] bg-black/12"})]},e.value))})},R=()=>{let e=(0,r.useSearchParams)().get("tab"),[t,l]=(0,s.useState)(null!=e?e:"create"),c=(0,r.useRouter)(),{user:o}=(0,n.A)();(0,s.useEffect)(()=>{if(e){let e=new URL(window.location.href);e.searchParams.delete("tab"),window.history.replaceState({},"",e.toString())}},[]);let d=e=>{c.push("/ready?id=".concat(e.project_id,"&url=").concat(e.project_url,"&iframe_url=").concat(e.iframe_url))},u=e=>{if(!(null==o?void 0:o.uid)){let t=JSON.parse(localStorage.getItem("Anonymous_Projects")||"[]");localStorage.setItem("Anonymous_Projects",JSON.stringify([...t,e]))}},x=(e,t)=>(0,a.jsx)("div",{className:(0,i.cn)("flex h-full w-full flex-col items-center justify-center",!e&&"hidden"),children:t}),p=[{label:"Create",value:"create"},{label:"Upload",value:"upload"},{label:"Paste Code",value:"paste"}].filter(e=>void 0!==e);return(0,a.jsxs)("div",{className:"flex h-[calc(100vh-440px)] max-h-[800px] min-h-[600px] w-full flex-col items-center justify-center px-5",children:[(0,a.jsxs)("div",{className:"mx-auto mt-10 mb-6 max-w-screen-lg px-4 text-center sm:mt-16 sm:mb-8 md:mt-20 md:mb-10",children:[(0,a.jsx)("h1",{className:"text-[36px] text-black/95 md:text-[48px]",children:"Not YouTube, it's YouWare."}),(0,a.jsxs)("h2",{className:"mx-auto max-w-[300px] px-2 text-[14px] text-black/65 sm:max-w-none",children:[(0,a.jsx)("span",{className:"font-bold",children:"Finally, "}),"your computer speaks"," ",(0,a.jsx)("span",{className:"font-bold italic",children:"your language."})]})]}),(0,a.jsx)(U,{tabs:p,selectedTab:t,onSelect:e=>l(e),className:"mb-6"}),(0,a.jsx)("div",{className:"flex h-60 w-full max-w-[1280px] flex-col items-center justify-center rounded-[20px] bg-white md:w-4/5 xl:w-3/5 xl:p-0 2xl:w-1/2",children:(0,a.jsx)("div",{className:"relative flex h-full w-full flex-1",children:(0,a.jsxs)("div",{className:"relative flex h-full w-full flex-col",children:[x("create"===t,(0,a.jsx)(y,{})),x("upload"===t,(0,a.jsx)(T,{onUploadSuccess:d,onProjectDeployed:u})),x("paste"===t,(0,a.jsx)(C,{onUploadSuccess:d,onProjectDeployed:u}))]})})})]})}},9230:(e,t,l)=>{"use strict";l.d(t,{default:()=>w});var a=l(5155),r=l(5427),s=l(2115),n=l(4477);let i=(0,n.createServerReference)("40cfdb560a5ea0bb67bfbb0ac49cb83141399b98ff",n.callServer,void 0,n.findSourceMapURL,"getProjects"),c=(0,n.createServerReference)("7f1d36a7a79f9e055200837d60acd937e99ee47301",n.callServer,void 0,n.findSourceMapURL,"getInstallFlag"),o=(0,n.createServerReference)("40ccf59053abc895c161a8bb6051e714a027d1613b",n.callServer,void 0,n.findSourceMapURL,"markImpression"),d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{batchInterval:t=1e3}=e,[l,a]=(0,s.useState)(new Set),r=(0,s.useRef)(null),n=(0,s.useCallback)((e,t,l,r)=>{a(t=>{let l=new Set(t);return l.add(e),l})},[]);return(0,s.useEffect)(()=>{let e=async()=>{if(l.size>0){let e=Array.from(l);try{a(new Set),await o(e)}catch(e){console.error("Failed to report project exposures:",e)}}};return r.current&&clearTimeout(r.current),l.size>0&&(r.current=setTimeout(e,t)),()=>{r.current&&clearTimeout(r.current)}},[l,t]),{handleExposure:n,exposedProjectsCount:l.size}};var u=l(6389);let x=()=>{document.cookie="install_flag=true; path=/; max-age=".concat(2592e3,"; domain=").concat(".youware.com")};var p=l(5695),m=l(8161),f=l(6065);let h=e=>{var t,l,r,s;let{project:n,userClick:i}=e;return(0,a.jsxs)("div",{className:"flex flex-row justify-start gap-2 pl-1",children:[(0,a.jsx)("img",{src:null===(t=n.user)||void 0===t?void 0:t.photo_url,className:"mt-0.5 h-[30px] w-[30px] cursor-pointer rounded-full",onClick:i,alt:n.title}),(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("div",{className:"text-[14px] text-black/95",children:null!==(s=n.title)&&void 0!==s?s:"".concat(null===(l=n.user)||void 0===l?void 0:l.display_name,"'s project")}),(0,a.jsx)("div",{className:"text-[12px] text-black/30",onClick:i,children:null===(r=n.user)||void 0===r?void 0:r.display_name})]})]})};var v=l(165),b=l(8538);let j=e=>{var t,l;let{project:r,index:n,area:i,onUpdate:c,tabName:o,onExposure:d}=e,[x,j]=(0,s.useState)(!1),g=(0,s.useRef)(null),w=(0,p.useRouter)(),_=(0,s.useRef)(null),{track:y}=(0,u.s)();(0,s.useEffect)(()=>{let e=new IntersectionObserver(t=>{t[0].isIntersecting&&!x&&(y("home_project_show",{project_url:r.project_url,index:n+1,area:i,tab_name:o}),d&&d(r.project_id,n,i,o),j(!0),e.disconnect())});return g.current&&e.observe(g.current),()=>e.disconnect()},[y,r.project_url,n,i,x,d,o]);let N=(0,s.useCallback)(()=>{y("home_project_click",{project_url:r.project_url,index:n+1,area:i,tab_name:o}),setTimeout(()=>{let e=(0,b.X)(r.project_url,"home");window.open(e,"_blank")},100)},[r]),k=(0,s.useCallback)(e=>{var t,l,a;if(e.preventDefault(),e.stopPropagation(),(null===(t=r.user)||void 0===t?void 0:t.uid)&&(null===(l=r.user)||void 0===l?void 0:l.uid)!==v.v1){let e="/profile/".concat(null===(a=r.user)||void 0===a?void 0:a.uid);y("home_creator_click",{project_url:r.project_url,creator_profile_url:e}),window.open(e,"_blank")}},[r.user,w]);return(0,a.jsxs)("div",{ref:g,className:"flex w-full cursor-pointer flex-col gap-3 rounded-[16px] bg-white p-2 pb-3 duration-300",onClick:N,children:[(0,a.jsxs)("div",{className:"flex h-full w-full flex-col gap-3",children:[(0,a.jsx)("div",{className:"relative overflow-hidden rounded-[8px] border border-black/6",onMouseEnter:()=>{var e;null===(e=_.current)||void 0===e||e.play()},onMouseLeave:()=>{var e;null===(e=_.current)||void 0===e||e.pause()},children:(0,a.jsx)("div",{className:"aspect-[16/9] w-full overflow-hidden",children:(0,a.jsx)(m.A,{url:null!==(l=null!==(t=r.custom_cover_url)&&void 0!==t?t:r.cover_url)&&void 0!==l?l:"",className:"h-full w-full object-cover object-top transition-transform duration-300 hover:scale-102",ref:_})})}),(0,a.jsx)(h,{project:r,userClick:k})]}),(0,a.jsx)("div",{className:"h-[1px] w-full px-1",children:(0,a.jsx)("div",{className:"h-full w-full bg-black/6"})}),(0,a.jsx)(f.A,{project:r,onUpdate:c})]})};function g(){return(0,a.jsx)("div",{className:"3xl:grid-cols-4 mx-auto grid grid-cols-1 gap-8 md:grid-cols-2 xl:grid-cols-3",children:Array(6).fill(0).map((e,t)=>(0,a.jsxs)("div",{className:"flex w-full flex-col gap-3 rounded-[16px] bg-white p-2 pb-3",children:[(0,a.jsx)("div",{className:"relative overflow-hidden rounded-[8px] border border-black/6",children:(0,a.jsx)("div",{className:"aspect-[16/9] w-full animate-pulse bg-black/5"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"h-8 w-8 animate-pulse rounded-full bg-black/5"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"mb-1 h-3.5 w-24 animate-pulse rounded bg-black/5"}),(0,a.jsx)("div",{className:"h-2.5 w-16 animate-pulse rounded bg-black/5"})]})]}),(0,a.jsx)("div",{className:"h-[1px] w-full px-1",children:(0,a.jsx)("div",{className:"h-full w-full bg-black/3"})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"h-7 w-20 animate-pulse rounded-[4px] bg-black/5"}),(0,a.jsx)("div",{className:"h-7 w-7 animate-pulse rounded-full bg-black/5"})]})]},t))})}function w(e){let{categories:t,initialCategory:l,initialProjects:n,isNewInstall:o}=e,[p,m]=(0,s.useState)(l),[f,h]=(0,s.useState)(o),[v,b]=(0,s.useState)(n),[w,_]=(0,s.useState)(!1),[y,N]=(0,s.useState)(null),[k,S]=(0,s.useState)({next_cursor:"",has_more:!0}),[C,P]=(0,s.useState)(!1),E=(0,s.useRef)(null),T=(0,s.useRef)(null),U=(0,s.useRef)(!1),{track:R}=(0,u.s)(),{handleExposure:A}=d();(0,s.useEffect)(()=>{(async()=>{await c()||x()})()},[]);let I=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;if(!U.current)try{U.current=!0,e?_(!0):P(!0);let a=await i({page_size:12,cursor:e?"":k.next_cursor,...f?{is_new_user:f}:{},...t&&"all"!==t?{category_id:t}:{}});if(0===a.code&&a.data){var l;let t=(null===(l=a.data)||void 0===l?void 0:l.projects)||[];e?b(t):b(e=>{let l=t.filter(t=>!e.some(e=>e.project_id===t.project_id));return[...e,...l]}),S(a.data.page_info)}else N(a.message||"Failed to load projects")}catch(e){N("An error occurred while fetching projects"),S({next_cursor:"",has_more:!1})}finally{_(!1),P(!1),U.current=!1}},M=e=>{m(e),b([]),I(!0,e.category_id),R("home_category_tab_click",{tab_name:e.display_name})},z=()=>{w||C||!k.has_more||I(!1,p?p.category_id:void 0)},F=(e,t)=>{b(l=>l.map(l=>l.project_url===e.project_url?{...l,interaction:t}:l))};return(0,s.useEffect)(()=>(E.current&&E.current.disconnect(),E.current=new IntersectionObserver(e=>{let[t]=e;!t.isIntersecting||!k.has_more||w||C||y||z()},{rootMargin:"0px 0px 600px 0px",threshold:.1}),T.current&&E.current.observe(T.current),()=>{E.current&&E.current.disconnect()}),[k.has_more,w,C,y,z]),(0,a.jsxs)("div",{className:"mx-auto w-full max-w-[2000px] px-5 py-6 sm:px-4 md:px-22",children:[(0,a.jsx)("div",{className:"mb-5 flex justify-center sm:mb-4 md:mb-4",children:(0,a.jsx)("div",{className:"no-scrollbar flex items-center gap-3 overflow-x-auto pb-2 whitespace-nowrap",children:t&&t.map(e=>(0,a.jsx)("button",{onClick:()=>M(e),disabled:w,className:"".concat(w?"":"cursor-pointer"," rounded-[10px] px-4 py-2.5 text-[14px] font-medium transition-colors ").concat((null==p?void 0:p.category_id)===e.category_id?"bg-brand text-white":"bg-black/6 text-black/65 hover:bg-black/10"),children:e.display_name},e.category_id))})}),w?(0,a.jsx)(g,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"3xl:grid-cols-4 mx-auto grid grid-cols-1 gap-5 sm:gap-8 md:grid-cols-2 md:gap-8 xl:grid-cols-3",children:v.map((e,t)=>(0,a.jsx)(j,{project:e,area:"codecamp",index:t,onUpdate:F,onExposure:A,tabName:(null==p?void 0:p.display_name)||""},"".concat(e.project_url,"-").concat(t)))}),0===v.length&&!w&&!y&&(0,a.jsxs)("div",{className:"my-8 py-16 text-center",children:[(0,a.jsx)("p",{className:"mb-2 text-xl font-medium text-black/95",children:"No projects found"}),(0,a.jsx)("p",{className:"text-sm text-black/95",children:"Upload your first project to get started"})]}),y&&(0,a.jsx)("div",{className:"my-8 rounded-lg p-6 text-center text-red-500",children:y})]}),(0,a.jsx)("div",{ref:T,className:"mt-8 h-20 w-full"}),k.has_more&&!w&&(0,a.jsx)("div",{className:"mt-8 flex justify-center",children:(0,a.jsx)("button",{onClick:z,disabled:C||U.current,className:"rounded-full bg-black/3 px-4 py-2 text-[14px] text-black/95 transition-colors duration-200 hover:bg-black/6 disabled:opacity-70",children:C?(0,a.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)(r.xNY,{className:"h-4 w-4 animate-spin text-black/95"}),(0,a.jsx)("p",{children:"Loading more..."})]}):"More ideas"})})]})}},9696:(e,t,l)=>{Promise.resolve().then(l.bind(l,6854)),Promise.resolve().then(l.bind(l,9230)),Promise.resolve().then(l.bind(l,6450)),Promise.resolve().then(l.bind(l,9269))}}]);