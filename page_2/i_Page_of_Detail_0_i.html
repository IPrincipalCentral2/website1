










<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Finance Tracker</title>
  <link rel="stylesheet" href="i_styles_2_i.css">
</head>
<body>

  <!-- Ø§Ù„Ù…Ø¯Ø§Ø®ÙŠÙ„ -->
  <div class="table-wrapper">
    <h2>ðŸ’° Money Enter</h2>
    <div class="account-total" id="enter-accounts"></div> <!-- Ù…Ø¬Ø§Ù…ÙŠØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª -->
    <div class="total" id="enter-total">Total: </div>
    <div class="table-container">
      <table id="enter-table">
        <thead>
          <tr>
            <th>Account</th>
            <th>Description</th>
            <th>Amount</th>
            <th>Currency</th>
            <th>Date</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <!-- Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ -->
  <div class="table-wrapper">
    <h2>ðŸ’¸ Depances</h2>
    <div class="account-total" id="depance-accounts"></div> <!-- Ù…Ø¬Ø§Ù…ÙŠØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª -->
    <div class="total" id="depance-total">Total: </div>
    <div class="table-container">
      <table id="depance-table">
        <thead>
          <tr>
            <th>Account</th>
            <th>Description</th>
            <th>Amount</th>
            <th>Currency</th>
            <th>Date</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <script>
    // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª JSON
    async function loadData(url) {
      try {
        const res = await fetch(url);
        if (!res.ok) throw new Error("HTTP error " + res.status);
        return await res.json();
      } catch (err) {
        console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù:", url, err);
        return [];
      }
    }

    // Ø¹Ø±Ø¶ Ø¬Ø¯ÙˆÙ„ Ù…Ø¹ Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ù„ÙƒÙ„ Ø¹Ù…Ù„Ø© + Ø­Ø³Ø§Ø¨
    function renderTable(data, tableId, totalId, accountId) {
      const tbody = document.querySelector(`#${tableId} tbody`);
      tbody.innerHTML = "";
      const totals = {};       // Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„Ø§Øª
      const accountTotals = {}; // Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª

      // Ù†Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø£Ø³ÙÙ„ Ù„Ù„Ø£Ø¹Ù„Ù‰
      data.forEach(item => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${item.name_of_account}</td>
          <td>${item.description}</td>
          <td>${item.amount}</td>
          <td>${item.currency}</td>
          <td>${item.date}</td>
        `;
        tbody.appendChild(tr);

        // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ù„ÙƒÙ„ Ø¹Ù…Ù„Ø©
        if (!totals[item.currency]) totals[item.currency] = 0;
        totals[item.currency] += parseFloat(item.amount);

        // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ù„ÙƒÙ„ Ø­Ø³Ø§Ø¨
        if (!accountTotals[item.name_of_account]) accountTotals[item.name_of_account] = 0;
        accountTotals[item.name_of_account] += parseFloat(item.amount);
      });

      // Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„Ø§Øª
      let totalText = "Total: ";
      for (const [currency, sum] of Object.entries(totals)) {
        totalText += `${sum} ${currency} | `;
      }
      document.getElementById(totalId).textContent = totalText.replace(/\|\s*$/, "");

      // Ø¥Ø¸Ù‡Ø§Ø± Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª
      let accountText = "Accounts Totals: ";
      for (const [account, sum] of Object.entries(accountTotals)) {
        accountText += `${account}: ${sum} | `;
      }
      document.getElementById(accountId).textContent = accountText.replace(/\|\s*$/, "");
    }

    // ØªØ´ØºÙŠÙ„
    async function init() {
      const moneyEnter = await loadData("i_money_enter_0_i.json");
      const depances = await loadData("i_depance_0_i.json");

      renderTable(moneyEnter, "enter-table", "enter-total", "enter-accounts");
      renderTable(depances, "depance-table", "depance-total", "depance-accounts");
    }

    init();
  </script>
</body>
</html>















